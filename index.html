<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBD Nur Atipa ‚ú®</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Georgia&display=swap" rel="stylesheet">
    <style>
        :root {
            --pink-main: #ff4d6d;
            --pink-gradient: linear-gradient(to left, #ff4d6d, #ff9e7d);
        }

        body {
            margin: 0; padding: 0; font-family: 'Poppins', sans-serif;
            background: #121212; color: white; text-align: center;
            overflow-x: hidden; scroll-behavior: smooth;
            user-select: none;
        }

        .hidden { display: none !important; }

        /* --- INTRO --- */
        #section-kado {
            height: 100vh; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background: #121212; transition: 1s;
        }
        .gift-box { font-size: 100px; cursor: pointer; transition: 0.3s; filter: drop-shadow(0 0 15px rgba(255,77,109,0.3)); }
        .shake-gift { animation: shakeKado 0.4s ease-in-out; }
        @keyframes shakeKado { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-10deg); } 75% { transform: rotate(10deg); } }

        /* --- HALAMAN UTAMA --- */
        #main-page {
            background: var(--pink-gradient);
            min-height: 100vh;
            position: relative; padding-bottom: 50px;
            animation: fadeInPage 1.5s ease;
        }
        @keyframes fadeInPage { from { opacity: 0; filter: blur(10px); } to { opacity: 1; filter: blur(0); } }

        .music-control {
            position: fixed; top: 20px; right: 20px; z-index: 3000;
            background: rgba(255, 255, 255, 0.3); backdrop-filter: blur(5px);
            padding: 10px; border-radius: 50%; width: 30px; height: 30px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; border: 1px solid white;
        }

        .header-text { padding: 60px 20px 20px; }
        .header-text h1 { 
            font-size: 2.5rem; margin: 0; 
            text-shadow: 2px 4px 10px rgba(0,0,0,0.2);
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 0 0 10px #fff, 0 0 20px var(--pink-main); }
            to { text-shadow: 0 0 20px #fff, 0 0 30px #ff9e7d; }
        }

        .time-tracker { font-size: 0.8rem; background: rgba(255,255,255,0.2); display: inline-block; padding: 8px 20px; border-radius: 50px; margin-top: 15px; backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.3); }
        .running-text { font-style: italic; font-size: 0.85rem; margin-top: 10px; min-height: 20px; transition: 0.5s; color: #fff; }

        /* --- BEATING HEART --- */
        .heart-beat {
            font-size: 50px;
            margin: 20px 0;
            display: inline-block;
            animation: heartBeat 1.2s infinite cubic-bezier(0.215, 0.61, 0.355, 1);
            filter: drop-shadow(0 0 10px white);
        }
        @keyframes heartBeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.3); }
            30% { transform: scale(1.1); }
            45% { transform: scale(1.4); }
            100% { transform: scale(1); }
        }

        .zodiac-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            margin: 30px 20px;
            padding: 20px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-size: 0.85rem;
        }

        /* --- POLAROID --- */
        .photo-wrap { position: relative; width: 100%; max-width: 500px; height: 550px; margin: 20px auto; }
        .polaroid {
            position: absolute; background: white; padding: 10px 10px 30px 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); width: 150px;
            cursor: pointer; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: float 4s ease-in-out infinite;
        }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(-5deg); } 50% { transform: translateY(-15px) rotate(5deg); } }
        .polaroid img { width: 100%; height: 150px; object-fit: cover; }
        .img1 { top: 0; left: 5%; animation-delay: 0s; }
        .img2 { top: 40px; right: 5%; animation-delay: 1s; }
        .img3 { top: 220px; left: 10%; animation-delay: 0.5s; }
        .img4 { top: 260px; right: 8%; animation-delay: 1.5s; }
        .caption { color: #333; font-size: 0.65rem; margin-top: 10px; display: none; font-style: italic; font-weight: 600; }

        /* Bubble Effect */
        .bubble { position: fixed; bottom: -50px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; pointer-events: none; animation: rise 10s infinite ease-in; }
        @keyframes rise { to { transform: translateY(-110vh) translateX(50px); opacity: 0; } }

        /* Heart Click */
        .click-heart { position: fixed; pointer-events: none; font-size: 30px; animation: heartFly 0.8s ease-out forwards; z-index: 9999; }
        @keyframes heartFly { 0% { transform: scale(0); opacity: 1; } 100% { transform: scale(2) translateY(-120px); opacity: 0; } }

        /* Background Hati Jatuh */
        .heart-bg { position: fixed; top: -10%; z-index: 0; color: rgba(255,255,255,0.6); font-size: 20px; animation: fall linear infinite; pointer-events: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        /* --- AMPLOP --- */
        .envelope-wrapper { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; height: 200px; background: #ff758c; display: none; z-index: 2000; }
        .envelope-wrapper::before { content: ""; position: absolute; top: 0; left: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-top: 100px solid #ff4d6d; transform-origin: top; transition: 0.5s; z-index: 2; }
        .envelope-wrapper.open::before { transform: rotateX(180deg); z-index: 0; }
        #section-surat { position: absolute; top: 5px; left: 50%; transform: translateX(-50%); width: 90%; background: white; color: #333; padding: 20px; border-radius: 10px; z-index: 1; transition: 1s; max-height: 0; overflow: hidden; opacity: 0; }
        .envelope-wrapper.open #section-surat { transform: translate(-50%, -150px); max-height: 500px; opacity: 1; width: 320px; }

        /* --- KUE --- */
        .cake-area { width: 100%; margin-top: 50px; padding-bottom: 40px; position: relative; z-index: 10; }
        .cake-container { position: relative; width: 180px; margin: 20px auto 30px; }
        .flame { width: 10px; height: 16px; background: #ff4500; border-radius: 50%; position: absolute; top: -18px; left: -1px; box-shadow: 0 0 10px #ff4500; animation: flicker 0.1s infinite alternate; }
        .btn-main { background: white; color: var(--pink-main); border: none; padding: 15px 40px; border-radius: 50px; font-weight: 800; cursor: pointer; transition: 0.3s; animation: pulse 1.5s infinite; }
        
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1500; display: none; }
        #typewriter { line-height: 1.6; font-size: 0.9rem; text-align: left; white-space: pre-wrap; }

        .sparkle-name { display: inline-block; position: relative; }
        .sparkle-name::after { content: '‚ú®'; position: absolute; top: -10px; right: -20px; animation: sparkleAnim 1.5s infinite; }
        @keyframes sparkleAnim { 0%, 100% { opacity: 0; transform: scale(0.5); } 50% { opacity: 1; transform: scale(1.2); } }

        footer { font-size: 0.6rem; opacity: 0.7; margin-top: 40px; padding-bottom: 20px; }
    </style>
</head>
<body onclick="createFloatingHeart(event)">

    <audio id="hbd-music" loop>
        <source src="lagu/kota ini tak sama tanpamu.mp3" type="audio/mpeg">
    </audio>

    <div id="musicBtn" class="music-control hidden" onclick="toggleMusic()">üéµ</div>

    <div id="section-kado">
        <div class="gift-box" id="giftBox" onclick="handleKado()">üéÅ</div>
        <p id="teks-kado">Klik kadonya untuk buka ‚ù§Ô∏è</p>
    </div>

    <div id="main-page" class="hidden">
        <div id="hearts-container"></div>
        <div class="header-text">
            <h1>Happy Birthday!</h1>
            <p class="small-wish"><span class="sparkle-name">Nur Atipa</span> ‚ú®</p>
            
            <div class="time-tracker" id="timer">Memuat momen berhargamu...</div><br>
            
            <div class="heart-beat">‚ù§Ô∏è</div>
            
            <p class="running-text" id="quote-display">Hari ini dunia lebih indah karena kamu ada. ‚ú®</p>

            <div class="spacer" style="margin: 30px 0;"></div>
            <h2 class="memories-title">Kenangan Terindah Kita</h2>
        </div>

        <div class="photo-wrap">
            <div class="polaroid img1" onclick="goyangFoto(this)"><img src="foto/img1.jpg"><p class="caption">Momen yang begitu indah ‚ú®</p></div>
            <div class="polaroid img2" onclick="goyangFoto(this)"><img src="foto/img2.jpg"><p class="caption">Senyum paling manis! ‚ù§Ô∏è</p></div>
            <div class="polaroid img3" onclick="goyangFoto(this)"><img src="foto/img3.jpg"><p class="caption">Tak terlupakan.</p></div>
            <div class="polaroid img4" onclick="goyangFoto(this)"><img src="foto/img4.jpg"><p class="caption">Selalu bahagia bersamamu.</p></div>
        </div>

        <div class="zodiac-card">
            <h3 style="margin-top:0">‚ôâ The Best Taurus Girl</h3>
            <p>Seorang Taurus yang lahir pada 6 Mei dikenal sangat setia, penyayang, dan punya selera yang bagus. Tetaplah jadi orang yang tulus dan menginspirasi ya! ‚ù§Ô∏è</p>
        </div>

        <div class="cake-area">
            <h2 id="wish-text">Make a Wish Dulu! ‚ú®</h2>
            <div class="cake-container">
                <div class="candles" style="display: flex; justify-content: center; gap: 12px; margin-bottom: -5px;">
                    <div style="width: 8px; height: 35px; background: #ffd700; position: relative;"><div class="flame"></div></div>
                    <div style="width: 8px; height: 35px; background: #ffd700; position: relative;"><div class="flame"></div></div>
                    <div style="width: 8px; height: 35px; background: #ffd700; position: relative;"><div class="flame"></div></div>
                </div>
                <div style="width: 120px; height: 40px; background: #ff8fa3; border-radius: 8px 8px 0 0; margin: 0 auto;"></div>
                <div style="width: 150px; height: 35px; background: #bde0fe; margin: 0 auto;"></div>
                <div style="width: 180px; height: 50px; background: #ffafbd; border-radius: 0 0 8px 8px; margin: 0 auto;"></div>
            </div>
            <button id="btn-action" class="btn-main" onclick="handleLilin()">Tiup Lilinnya Sekarang! üïØÔ∏è</button>
        </div>

        <footer>Dibuat dengan segenap hati untuk Nur Atipa ‚ù§Ô∏è</footer>
    </div>

    <div id="overlay" class="overlay" onclick="tutupSurat()"></div>
    <div id="envelope" class="envelope-wrapper">
        <div id="section-surat">
            <h2 style="font-family: Georgia, serif; color: var(--pink-main); font-size: 1.2rem;">Buat Nur Atipa ‚ù§Ô∏è</h2>
            <div id="typewriter"></div>
            <a id="btn-wa" class="hidden" href="https://wa.me/6285136479310?text=Makasih%20sayang%20ucapannya!%20‚ù§Ô∏è" style="display: block; background: var(--pink-main); color: white; padding: 10px; border-radius: 50px; text-decoration: none; font-weight: bold; margin-top: 15px; font-size: 0.8rem;">Balas Pesan ‚ù§Ô∏è</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        let clicks = 0;
        const music = document.getElementById('hbd-music');
        const musicBtn = document.getElementById('musicBtn');
        const suratText = "Happy Birthday ya Nur Atipa! üéâ Gak kerasa banget hari ini kamu nambah usia. Aku seneng banget bisa ngerayain ini bareng kamu.\n\nSemoga kamu makin bahagia, makin bersinar, dan semua wishlist kamu tahun ini checklist semua! ‚ú®\n\n- Selalu bahagia ya -";

        function toggleMusic() {
            if (music.paused) { music.play(); musicBtn.innerText = "üéµ"; } 
            else { music.pause(); musicBtn.innerText = "üîá"; }
        }

        function createBubbles() {
            const b = document.createElement("div");
            b.classList.add("bubble");
            const size = Math.random() * 20 + 10 + "px";
            b.style.width = size; b.style.height = size;
            b.style.left = Math.random() * 100 + "vw";
            b.style.animationDuration = Math.random() * 5 + 5 + "s";
            document.body.appendChild(b);
            setTimeout(() => b.remove(), 10000);
        }

        function updateTimer() {
            const birthDate = new Date("2008-05-06T00:00:00");
            const now = new Date();
            const diff = now - birthDate;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById('timer').innerText = `Sudah ${days.toLocaleString()} Hari kamu mencerahkan dunia ‚ú®`;
        }

        const quotes = [
            "Kamu alasan seseorang tersenyum. ‚ù§Ô∏è", 
            "Terima kasih sudah lahir ke dunia. üòä", 
            "Hari ini adalah tentangmu. ‚ú®",
            "Tetaplah jadi Nur Atipa yang baik. üå∏"
        ];
        let qIdx = 0;
        function cycleQuotes() {
            const el = document.getElementById('quote-display');
            if(el) { 
                el.style.opacity = 0;
                setTimeout(() => {
                    el.innerText = quotes[qIdx]; 
                    el.style.opacity = 1;
                    qIdx = (qIdx + 1) % quotes.length; 
                }, 500);
            }
        }

        function createFloatingHeart(e) {
            const h = document.createElement("div");
            h.classList.add("click-heart"); h.innerHTML = "‚ù§Ô∏è";
            h.style.left = e.clientX + "px"; h.style.top = e.clientY + "px";
            document.body.appendChild(h); setTimeout(() => h.remove(), 800);
        }

        function typeWriter() {
            let i = 0; const speed = 50; const container = document.getElementById("typewriter");
            container.innerHTML = "";
            function type() {
                if (i < suratText.length) { container.innerHTML += suratText.charAt(i); i++; setTimeout(type, speed); }
                else { document.getElementById("btn-wa").classList.remove("hidden"); }
            }
            type();
        }

        function createHeart() {
            const container = document.getElementById("hearts-container");
            if(!container) return;
            const heart = document.createElement("div");
            heart.classList.add("heart-bg"); heart.innerHTML = "‚ù§Ô∏è";
            heart.style.left = Math.random() * 100 + "vw"; heart.style.animationDuration = Math.random() * 3 + 3 + "s";
            container.appendChild(heart); setTimeout(() => heart.remove(), 6000);
        }

        function handleKado() {
            clicks++;
            const gift = document.getElementById('giftBox');
            gift.classList.add('shake-gift');
            if (clicks >= 4) {
                music.play();
                musicBtn.classList.remove('hidden');
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                setTimeout(() => {
                    document.getElementById('section-kado').classList.add('hidden');
                    document.getElementById('main-page').classList.remove('hidden');
                    setInterval(createHeart, 400); 
                    setInterval(createBubbles, 800);
                    setInterval(cycleQuotes, 3500);
                    setInterval(updateTimer, 1000); 
                    window.scrollTo(0, 0);
                }, 1000);
            } else {
                setTimeout(() => gift.classList.remove('shake-gift'), 400);
                document.getElementById('teks-kado').innerText = `${4 - clicks} klik lagi...`;
            }
        }

        function goyangFoto(el) {
            el.style.animation = 'none'; void el.offsetWidth;
            document.querySelectorAll('.polaroid').forEach(p => p.style.zIndex = "1");
            el.style.zIndex = "50"; el.classList.add('shake');
            el.querySelector('.caption').style.display = 'block';
            setTimeout(() => { el.classList.remove('shake'); el.style.animation = 'float 4s ease-in-out infinite'; }, 500);
        }

        function handleLilin() {
            const btn = document.getElementById('btn-action');
            if (btn.innerText.includes("Tiup")) {
                document.querySelectorAll('.flame').forEach(f => f.style.display = 'none');
                confetti({ particleCount: 200, spread: 100 });
                document.getElementById('wish-text').innerText = "Wishes sent to heaven! üöÄ";
                btn.innerText = "Baca Kartu Ucapan ‚ù§Ô∏è";
            } else {
                document.getElementById('overlay').style.display = 'block';
                const env = document.getElementById('envelope');
                env.style.display = 'block';
                setTimeout(() => { env.classList.add('open'); setTimeout(typeWriter, 1000); }, 500);
            }
        }

        function tutupSurat() {
            document.getElementById('envelope').classList.remove('open');
            document.getElementById('envelope').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
    </script>
</body>
</html>
